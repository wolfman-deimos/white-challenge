<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>White Challenge</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <link href="https://fonts.googleapis.com/css?family=Crimson+Pro|Varela&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        #map{
            width: 600px;
            height: 400px;
        }

        /*Small devices (landscape phones, 576px and up)*/
        @media (min-width: 576px) {
            #map{
                width: 80%;
            }
        }

        /*Medium devices (tablets, 768px and up)*/
        @media (min-width: 768px) {
            #map{
                width: 60%;
            }
        }

        /*Large devices (desktops, 992px and up)*/
        @media (min-width: 992px) {

        }

        /*Extra large devices (large desktops, 1200px and up)*/
        @media (min-width: 1200px) {
            #map{
                width: 80%;
            }
        }

        .marker-foundation {
            background-image: url('img/purple-ribbon-edited.png');
            background-size: cover;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
        }

        html, body{height:100vh;}
        #outer{
            min-height:100vh;
        }

        * html #outer{height:100vh;}
    </style>

    <link rel="stylesheet" href="css/whtchl-custcss.css">
</head>
<main  class="bg-gradient">

<body class="bg-gradient">

<div class="container-fluid m-0 p-0 d-md-none">
    <nav><ul class="d-flex justify-content-around ml-0">
        <li class="border-radius5"><a class="p-1" href="">Home</a></li>
        <li class=" border-radius5"><a class="p-1" href="">Volunteer</a></li>
        <li class=" border-radius5"><a class="p-1" href="resources.html">Resources</a></li>
    </ul></nav>
    <h1 class="display-4 my-0 text-varela text-center text-color-white text-shadow float-center">Care Package</h1>

</div>

<div class="container">
    <div class="d-flex flex-column justify-content-center carddiv d-md-none">
        <div id="redcard-sm" class="card red-bg" style="width: 20rem;">
            <div class="w-100 mx-auto">
                <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
            </div>
            <div class="infoparent card-body">
                <h5 class="card-title">Red Package</h5>
                <p class="card-text">Focused on providing items tailored for our male populations in need we find.</p>
            </div>
            <span id="redinfo-sm" class="info badge badge-pill badge-dark">?</span>


        </div>

        <div id="whtcard-sm" class="wht-bg card" style="width: 20rem;">
            <div class="w-100 mx-auto">
                <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
            </div>
            <div class="infoparent card-body">
                <h5 class="card-title">White Package</h5>
                <p class="card-text">Focused on providing a gender-neutral set of items.</p>
            </div>
            <span id="whiteinfo-sm" class="info badge badge-pill badge-dark">?</span>

        </div>


        <div id="bluecard-sm" class="card mainblue-bg" style="width: 20rem;">
            <div class="w-100 mx-auto">
                <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
            </div>
            <div class="infoparent card-body text-color-white">
                <h5 class="card-title">Blue Package</h5>
                <p class="card-`text`">Focused on providing items tailored for our female populations in need we find.</p>
            </div>
            <span id="blueinfo-sm" class="info badge badge-pill badge-dark">?</span>
        </div>
    </div>
</div>
</div>


    <!--    <div class="form-group">-->
                <label class="mb-2" data-toggle="popover" data-trigger="hover" title="What is your living situation?" data-placement="right" data-content="Renting(a monthly lease/rent payment), owning(mortgaged or otherwise), no current residence(no physical residence), or other(please describe).">Residence</label>
                 <br>
                 <select class="mb-2" name="selectList" id="selectresidence">
                    <option id="renting" >Renting</option>
                     <option id="owning">Owning</option>
                    <option id="nocurrent">No current residence</option>
                    <option id="other">Other</option>
                </select>




                <!--        todo: Here I want to add some JS to have the chosen option display what the carepackage selected would contain, I think using DOM we should be able to inject a card with the various supplies contained in the care package-->

                <label class="mb-2" data-toggle="popover" data-trigger="hover" title="What package do you need?" data-placement="right" data-content="Choose your package (red, white, or blue)">Package</label>
                <br>
                <div class="form-group">
                    <select id="care_package">
                        <option value="none" selected>Which package?</option>
                        <option value="red">Red Package</option>
                        <option value="white">White Package</option>
                        <option value="blue">Blue Package</option>
                    </select>
                </div>



<div class="jumbotron jumbotron-fluid py-3 texas-banner d-none justify-content-center d-md-block">
    <div class="container-fluid m-0">
        <nav><ul class="d-flex position-absolute topright">
            <li class="ml-1 border-radius5"><a class="p-1" href="">Home</a></li>
            <li class="ml-1 border-radius5"><a class="p-1" href="">Volunteer</a></li>
            <li class="ml-1 border-radius5"><a class="p-1" href="resources.html">Resources</a></li>
        </ul></nav>
        <h1 class="display-4 my-0 text-varela text-center text-color-white text-shadow float-center">Care Package</h1>

    </div>
</div>
<!--form for aid receiver; desired data: name,age,gender,rank,residential status, phone number/best number, desc, options for packages -->
<!-- todo : bootstrap validation x-ref: https://getbootstrap.com/docs/4.0/components/forms/#server-side-->
<!-- todo : bootstrap popovers w/ more info for aspects of form, x-ref: https://getbootstrap.com/docs/4.0/components/popovers/-->
<div class="container d-none d-md-block">
    <div class="row">
<!--        <div class="col-4">-->
<!--        <form id="fieldform" class="border border-dark d-inline-block mb-1 p-3">-->

<!--            &lt;!&ndash;Content for HOME PANEL &ndash;&gt;-->
<!--                <div class="form-group">-->
<!--                    <input type="text" name="fname" id="fname" placeholder=" First name" required><br>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <input type="text" name="lname" id="lname" placeholder="Last name" required><br>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <input type="text" name="age" id="age" placeholder="Age"><br>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <select id="sex">-->
<!--                        <option>Male</option>-->
<!--                        <option>Female</option>-->
<!--                        <option>Prefer not to say</option>-->
<!--                    </select>-->
<!--                    <br>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <select id="military">-->
<!--                        <option>Civilian</option>-->
<!--                        <option>Air Force</option>-->
<!--                        <option>Army</option>-->
<!--                        <option>Coast Guard</option>-->
<!--                        <option>Marines</option>-->
<!--                        <option>Navy</option>-->
<!--                    </select><br>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                     <input type="text" name="rank" id="rank" placeholder="Rank"><br>-->
<!--                </div>-->


<!--    &lt;!&ndash;    <div class="form-group">&ndash;&gt;-->
<!--                 <select class="mb-2" name="selectList" id="selectresidence">-->
<!--                    <option id="nocurrent">No current residence</option>-->
<!--                    <option id="renting" >Renting</option>-->
<!--                     <option id="owning">Owning</option>-->
<!--                    <option id="other">Other</option>-->
<!--                </select>-->

<!--                <label id="otherresidence">-->
<!--                    <input type="text" id="other_residence" placeholder="Describe your situation.">-->
<!--                </label>-->
<!--                <br>-->

<!--                <div class="form-group">-->
<!--                    <input type="text" id="phone" placeholder="Best number to call?">-->
<!--                </div>-->

<!--                &lt;!&ndash;        todo: Here I want to add some JS to have the chosen option display what the carepackage selected would contain, I think using DOM we should be able to inject a card with the various supplies contained in the care package&ndash;&gt;-->

<!--                <div class="form-group">-->
<!--                    <select id="care_package">-->
<!--                        <option value="none" selected>Which package?</option>-->
<!--                        <option value="red">Red Package</option>-->
<!--                        <option value="white">White Package</option>-->
<!--                        <option value="blue">Blue Package</option>-->
<!--                    </select>-->
<!--                </div>-->

<!--                <button type="submit">Submit</button>-->
<!--        </form>-->
<!--    </div>-->

    <div class="col">
        <div class="container">
            <div class="d-flex flex-row carddiv">
                    <div id="redcard" class="card red-bg" style="width: 20rem;">
                        <div class="w-100 mx-auto">
                            <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
                        </div>
                        <div class="infoparent card-body">
                            <h5 class="card-title">Red Package</h5>
                            <p class="card-text">Focused on providing items tailored for our male populations in need we find.</p>
                        </div>
                        <span id="redinfo" class="info badge badge-pill badge-dark">?</span>


                    </div>

                    <div id="whtcard" class="wht-bg card" style="width: 20rem;">
                        <div class="w-100 mx-auto">
                            <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
                        </div>
                        <div class="infoparent card-body">
                            <h5 class="card-title">White Package</h5>
                            <p class="card-text">Focused on providing a gender-neutral set of items.</p>
                        </div>
                        <span id="whiteinfo" class="info badge badge-pill badge-dark">?</span>

                    </div>


                    <div id="bluecard" class="card mainblue-bg" style="width: 20rem;">
                        <div class="w-100 mx-auto">
                            <img class="card-img-top" src="img/pkgfiller.jpeg" alt="Card image cap">
                        </div>
                        <div class="infoparent card-body text-color-white">
                            <h5 class="card-title">Blue Package</h5>
                            <p class="card-`text`">Focused on providing items tailored for our female populations in need we find.</p>
                        </div>
                        <span id="blueinfo" class="info badge badge-pill badge-dark">?</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <!-- Mapbox JS -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
    <!-- Mapbox Geocoder Util Methods -->
    <script src="js/mapbox-geocoder-utils.js"></script>
    <!--custom js-->
    <script src="js/keys.js"></script>
    <script src="js/foundations.js"></script>
    <script src="js/mapbox-functions.js"></script>
    <script src="js/resources.js"></script>
    <script src="js/customjs.js"></script>
<!--    <script src="js/form.js"></script>-->
    <script>
        $('#fieldform').submit(function (e) {
            e.preventDefault();

            let fname = $('#fname').val();
            let lname = $('#lname').val();
            let age = $('#age').val();
            let sex = $('#sex').children('option:selected').val();
            let military = $('#military').children('option:selected').val();
            let rank = $('#rank').val();
            let housing = $('#selectresidence').children('option:selected').val();
            let other = $('#other_residence').val();
            let phone = $('#phone').val();
            let package = $('#care_package').children('option:selected').val();
            let user = {};
            let options = {
                enableHighAccuracy: true,
                timeout: 5000
            };

            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(function (position) {
                    console.log("Longitud: " + position.coords.longitude + " Latitude: " + position.coords.latitude);

                    user.first_name = fname;
                    user.last_name = lname;
                    user.age = age;
                    user.sex = sex;
                    user.military = military;
                    user.rank = rank;
                    user.housing = housing;
                    user.other = other;
                    user.phone = phone;
                    user.care_package = package;
                    user.last_location = {
                        longitud: position.coords.longitude,
                        latitud: position.coords.latitude
                    };


                }, function (error) {
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            console.log("User denied the request for Geolocation.");
                            break;
                        case error.POSITION_UNAVAILABLE:
                            console.log("Location information is unavailable.");
                            break;
                        case error.TIMEOUT:
                            console.log("The request to get user location timed out.");
                            break;
                        case error.UNKNOWN_ERROR:
                            console.log("An unknown error occurred.");
                            break;
                    }

                },options);
            }
            else {
                user.first_name = fname;
                user.last_name = lname;
                user.age = age;
                user.sex = sex;
                user.military = military;
                user.rank = rank;
                user.housing = housing;
                user.other = other;
                user.phone = phone;
                user.care_package = package;
                user.last_location = {
                    longitud: -98.4951,
                    latitud: 29.4246
                };

            }

            setTimeout(function () {
                const user_info = {title: 'Users', body: JSON.stringify(user)};
                const url = 'http://localhost:3000/users';
                const options = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(user),
                };
                fetch(url, options)
                    .then()
                    .catch();

                $(this).reset();
            }, 5100);

        });
    </script>
</body>
</main>
</html>

